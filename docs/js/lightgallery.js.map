{"version":3,"sources":["lightgallery.js"],"names":["lightgallery","window","document","hasNext","current","images","gallery","length","hasPrev","preload","gal","_","src","href","showOverlay","options","pageSize","getPageSize","css","overlay","width","height","style","display","animate","opacity","overlayOpacity","hideOverlay","isOpen","setContPos","vScale","bIsOnload","notFitScreen","fsTitle","w","h","disableAnimate","padding","minPadding","dLoadWidth","loaderImage","dLoadHeight","ar","dScreenWidth","dScreenHeight","dAvailableWidth","dAvailableHeight","dy","newWidth","newHeight","picture","langVars","fitScreen","fsClass","fullSize","fullSizeBtn","$disabled","getAttribute","id","setAttribute","Math","max","minContainerWidth","scr","getScrollXY","y","x","dBtnWidth","dBtnHeight","animCallback","showContent","nextBtn","prevBtn","resizeSync","container","left","top","duration","innerCont","fadeImage","bInProgress","hideContent","showLoadingIcon","oThrobber","hideLoadingIcon","createContainer","enableZoom","zoomIn","zoomOut","DIV","imgIndex","title","close","titleBar","navHandler","event","cancelBubble","stopPropagation","target","srcElement","type","fnList","LG_closeBtn","G","LG_zoomNormal","zoomNormal","LG_fitScreen","LG_zoomIn","LG_zoomOut","LG_nextLink","next","LG_prevLink","prev","call","addEvent","keyPressHandler","e","code","keyCode","which","charCode","78","39","66","37","27","shiftKey","extend","source","i","elem","styles","prop","setElemStyle","xScroll","yScroll","windowWidth","windowHeight","de","documentElement","body","compatMode","innerHeight","scrollMaxY","scrollWidth","scrollHeight","offsetHeight","offsetWidth","clientHeight","clientWidth","scrOfX","scrOfY","b","pageYOffset","pageXOffset","scrollLeft","scrollTop","tag","attr","name","value","createElement","len","arguments","STRING","className","innerHTML","appendChild","loadImage","Image","onload","ready","isReady","setTimeout","init","bindReady","doScrollCheck","doScroll","readyBound","readyState","addEventListener","DOMContentLoaded","removeEventListener","attachEvent","onreadystatechange","detachEvent","toplevel","frameElement","overlayColor","zoomStep","alias","imageAttrib","image","of","isIE","test","navigator","userAgent","parseFloat","RegExp","el","fn","setLangVars","vars","opts","matches","galleryName","imgName","imgs","getElementsByTagName","regx","match","showImage","__gallery__","__index__","push","onclick","lastChild","background","open","visibility","zoom","this","coef","img","returnValue","preventDefault","show","showSingle","index","ns","ps","focus","isFilterOpacity","filter","requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","msRequestAnimationFrame","oRequestAnimationFrame","callback","Date","pxs","option","after","comp","currentStyle","getComputedStyle","perf","performance","perfNow","now","webkitNow","msNow","mozNow","start","finish","running","cmpValue","easing","pos","cos","PI","loop","time","toFixed"],"mappings":"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","file":"lightgallery.js","sourcesContent":["/**\r\n* LightGallery v1.4\r\n* Author: Dmitri Ischenko - ischenkodv@gmail.com\r\n* Website: http://code.google.com/p/lightgallery\r\n* Freely distributable under MIT-style license\r\n*/\r\nvar lightgallery = (function(window, document){\r\n\r\n// local variables\r\nvar dy = false,\r\n    minContainerWidth,\r\n    readyBound,\r\n    isReady,\r\n    bInProgress,\r\n    \r\n    /* constants */\r\n    DIV         = 'div',\r\n    STRING      = 'string',\r\n\r\n    // Library options\r\n    options = {\r\n        showOverlay     : true,\r\n        overlayColor    : '#000',\r\n        overlayOpacity  : 0.85,\r\n        zoomStep        : 0.2,\r\n        animate         : true,\r\n        duration        : 800,\r\n        resizeSync      : false,    // resize container both vertically and horizontally at the same time\r\n        enableZoom      : true,\r\n        fadeImage       : true,\r\n        alias           : 'lightgallery',\r\n        fullSize        : false,\r\n        minPadding      : 15,       // minimal distance between container and window\r\n        imageAttrib     : 'data-image'\r\n    },\r\n\r\n    // Language variables\r\n    langVars = {\r\n        next      : 'Next',\r\n        prev      : 'Previous',\r\n        zoomIn    : 'Zoom In',\r\n        zoomOut   : 'Zoom Out',\r\n        fullSize  : 'Full Size',\r\n        fitScreen : 'Fit screen',\r\n        close     : 'Close',\r\n        image     : 'Image',\r\n        of        : 'of'\r\n    },\r\n\r\n    // Test if browser is Internet Explorer\r\n    // TODO: remove browser detection.\r\n    isIE = /MSIE ([^;]+)/.test(navigator.userAgent) && parseFloat(RegExp[\"$1\"]),\r\n\r\n    /* container and its elements */\r\n    container,      // container which holds image;\r\n    titleBar    = _(DIV, {id:'LG_titleBar'}),       // title bar\r\n    picture     = _('img', {id:'LG_pic'/*, width:300, height:300*/}), // Image inside lightbox\r\n    prevBtn     = _(DIV, {id:'LG_prevLink',title:langVars.prev}),        // \"previous\" button\r\n    nextBtn     = _(DIV, {id:'LG_nextLink',title:langVars.next}),        // \"next\" button\r\n    fullSizeBtn = _(DIV, {id: 'LG_zoomNormal', title: langVars.fullSize}),    // button which show image full size\r\n    zoomIn      = _(DIV, {id: 'LG_zoomIn', title: langVars.zoomIn}),    // Zoom In button\r\n    zoomOut     = _(DIV, {id: 'LG_zoomOut', title: langVars.zoomOut}),    // Zoom Out button\r\n    imgIndex    = _(DIV, {id: 'LG_imgIndex'}, langVars.image + ' 20 ' + langVars.of + ' 20 '), // index of images\r\n    loaderImage,\r\n\r\n    gallery,\r\n    isOpen,         // if gallery open?\r\n    current,        // index of the current image\r\n\r\n    oThrobber = _(DIV,{id:'LG_loading'}),      // Loading indicator\r\n    \r\n    /* Reference to overlay */\r\n    overlay = _(DIV, {id:'LG_overlay'}),\r\n\r\n    images, // list of images\r\n\r\n    /****************************/\r\n    /*     Functions            */\r\n    /****************************/\r\n\r\n    /**\r\n     * Add event listener\r\n     */\r\n    addEvent = (function(){\r\n        if (window.addEventListener) {\r\n            return function(el, type, fn) {\r\n                el.addEventListener(type, fn, false);\r\n            };\r\n        } else if (window.attachEvent) {\r\n            return function(el, type, fn) {\r\n                el.attachEvent('on' + type, function() {\r\n                    fn.call(el, window.event);\r\n                });\r\n            };\r\n        }\r\n    })();\r\n\r\nvar G = {\r\n\r\n    /**\r\n     * Set language variables\r\n     * @param {Object} vars - language variables\r\n     */\r\n    setLangVars : function(vars) {\r\n        extend(langVars, vars);\r\n    },\r\n\r\n\r\n    /**\r\n     * Initialize gallery\r\n     * @param {object} opts - gallery options\r\n     */\r\n    init: function(opts) {\r\n\r\n        opts && extend(options, opts);\r\n\r\n        if (!readyBound) return bindReady();\r\n\r\n        // get images\r\n        images = [];\r\n        var imgs = document.getElementsByTagName('a'),\r\n            regx = new RegExp('^'+options.alias+'\\\\[([a-zA-Z0-9_-]+)\\\\]|'+options.alias+'$'),\r\n            matches,\r\n            i = 0,\r\n            len = imgs.length,\r\n            body = document.body,\r\n            image,\r\n            galleryName,\r\n            imgName;\r\n        \r\n        // filter images that match specified RegEx expression\r\n        for (; i < len; i++) {\r\n            image = imgs[i];\r\n            imgName = image.getAttribute(options.imageAttrib) || image.getAttribute('rel');\r\n            if (!imgName) continue;\r\n\r\n            matches = imgName.match(regx);\r\n            if (matches) {\r\n                addEvent(image, 'click', G.showImage);\r\n                galleryName = matches[1];\r\n                if (galleryName) {\r\n                    if (!images[galleryName]) {\r\n                        images[galleryName] = [];\r\n                    }\r\n\r\n                    // save gallery name and index in image\r\n                    image.__gallery__ = galleryName;\r\n                    image.__index__ = images[galleryName].push(image) - 1;\r\n                }\r\n            }\r\n        }\r\n\r\n        // create overlay and container and add it to body\r\n        overlay.onclick = G.close;\r\n        body.appendChild(overlay);\r\n\r\n        loadImage();\r\n\r\n        if (!container) {\r\n            body.appendChild( container = createContainer() );\r\n            innerCont = container.lastChild;\r\n        }\r\n\r\n        addEvent(\r\n            body.attachEvent ? body : window,\r\n            'keydown',\r\n            keyPressHandler\r\n        );\r\n\r\n        // define the difference between container and image size\r\n        if (dy === false) {\r\n            var width = container.style.width;\r\n            container.style.width = '90%';\r\n            dy = container.offsetHeight;\r\n            container.style.width = width;\r\n            minContainerWidth = isIE ? 200 : container.offsetWidth;\r\n        }\r\n        \r\n        // set default color and opacity for overlay\r\n        css(overlay, {\r\n            background: options.overlayColor,\r\n            display: 'none',\r\n            opacity: options.overlayOpacity\r\n        });\r\n\r\n        /*addEvent(window, 'resize', function() {\r\n            setContPos(1);\r\n        });*/\r\n    },\r\n\r\n    /**\r\n     * Open (show) gallery\r\n     */\r\n    open : function(){\r\n        if (isOpen) return;\r\n\r\n        showOverlay();\r\n\r\n        // display container\r\n        picture.style.display='block';\r\n        setContPos();\r\n        css(container, {visibility: 'visible', display: 'block'});\r\n        isOpen = 1;\r\n    },\r\n\r\n    /**\r\n     * Close gallery\r\n     */\r\n    close: function(){\r\n        hideOverlay();\r\n        css(container, {visibility: 'hidden', display: 'none'});\r\n\r\n        picture.src = '';\r\n    },\r\n\r\n    zoomIn: function(){\r\n        G.zoom(1 + options.zoomStep);\r\n    },\r\n\r\n    zoomOut: function(){\r\n        G.zoom(1 - options.zoomStep);\r\n    },\r\n\r\n    zoomNormal: function() {\r\n        if (this.$disabled) return;\r\n\r\n        G.zoom(\r\n            picture.width == loaderImage.width && picture.height == loaderImage.height ? 0 : 1\r\n        );\r\n    },\r\n\r\n    zoom : function(coef){\r\n        hideContent();\r\n        setContPos(coef);\r\n    },\r\n\r\n    /**\r\n     * Shows image when user click it\r\n     * @param {Object} e Event object\r\n     */\r\n    showImage: function(e){\r\n        var img = this,\r\n            i = img.__index__;\r\n\r\n        e = e || window.event;\r\n        e.returnValue = false;\r\n        e.preventDefault && e.preventDefault();\r\n\r\n        if (img.__gallery__ && i > -1) {\r\n            gallery = img.__gallery__;\r\n            G.show(i);\r\n        } else {\r\n            gallery = null;\r\n            G.showSingle(img);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Show single image\r\n     * @param {Element} elem - reference to element\r\n     */\r\n    showSingle: function(elem){\r\n        G.open();\r\n\r\n        // Hide content and show loading icon\r\n        hideContent();\r\n        showLoadingIcon();\r\n\r\n        loadImage(elem.href);\r\n\r\n        titleBar.innerHTML = elem.title;\r\n        imgIndex.innerHTML = '';\r\n        prevBtn.style.visibility = nextBtn.style.visibility = 'hidden';\r\n    },\r\n\r\n    /**\r\n     * Show image from the gallery\r\n     * @param {Number} index - index of the image\r\n     */\r\n    show: function(index) {\r\n        if (!gallery || index < 0 || index > images[gallery].length-1 || (options.animate && bInProgress)) return;\r\n\r\n        G.open();\r\n\r\n        var gal = images[gallery],\r\n            ns = nextBtn.style,\r\n            ps = prevBtn.style;\r\n\r\n        hideContent();\r\n        showLoadingIcon();\r\n\r\n        bInProgress = 1;\r\n        \r\n        loadImage(gal[index].href);\r\n\r\n        titleBar.innerHTML = gal[index].title;\r\n        imgIndex.innerHTML = langVars.image+' '+(index+1)+' '+langVars.of+' '+gal.length;\r\n\r\n        current = index;\r\n        \r\n        // show or hide prev/next buttons depending on image index\r\n        ns.visibility = hasNext() ? 'visible' : 'hidden';\r\n        ps.visibility = hasPrev() ? 'visible' : 'hidden';\r\n\r\n        window.focus();\r\n    },\r\n\r\n    // show next image\r\n    next: function(){\r\n        G.show(current + 1);\r\n    },\r\n\r\n    // show previous image\r\n    prev: function(){\r\n        G.show(current - 1);\r\n    }\r\n};\r\n\r\n/**\r\n * Detects if gallery has next image after current\r\n */\r\nfunction hasNext() {\r\n    return current < images[gallery].length - 1 ? true : false;\r\n}\r\n\r\n/**\r\n * Detects if gallery has previous image before current\r\n */\r\nfunction hasPrev() {\r\n    return !!current;\r\n}\r\n\r\n/**\r\n * Preload adjacent images\r\n */\r\nfunction preload(){\r\n    var gal = images[gallery];\r\n    //if (!gal) return;\r\n    if (gal && gal[current+1]) _('img').src = gal[current+1].href;\r\n    if (gal && gal[current-1]) _('img').src = gal[current-1].href;\r\n}\r\n\r\n\r\n/**\r\n * Set the size and position of the container\r\n */\r\nfunction showOverlay() {\r\n    if (options.showOverlay) {\r\n\r\n        // set overlay size\r\n        var pageSize = getPageSize();\r\n        css(overlay, {\r\n            width: pageSize[0],\r\n            height: pageSize[1]\r\n        });\r\n\r\n        // show overlay if it's not shown already\r\n        if (overlay.style.display != 'block') {\r\n            css(overlay, {display: 'block'});\r\n            animate(overlay, {opacity: options.overlayOpacity}, 300);\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Hides overlay\r\n */\r\nfunction hideOverlay(){\r\n    animate(overlay, {opacity: 0}, 300, function(){\r\n        overlay.style.display = 'none';\r\n        isOpen = 0;\r\n    });\r\n}\r\n\r\n/**\r\n * Set container position\r\n * @param {number} vScale\r\n * @param {boolean} bIsOnload Show if function is called from whithin onload event\r\n */\r\nfunction setContPos(vScale, bIsOnload) {\r\n    // define references and variables\r\n    var notFitScreen, fsTitle,\r\n        w,h,    // width and height of the container\r\n        padding = options.minPadding*2,\r\n        disableAnimate,\r\n        // size of the container plus padding\r\n        dLoadWidth = loaderImage.width,\r\n        dLoadHeight = loaderImage.height,\r\n\r\n        // size of the viewport and the space available to the container\r\n        ar = getPageSize(),\r\n        dScreenWidth = ar[2],\r\n        dScreenHeight = ar[3],\r\n        dAvailableWidth =  dScreenWidth - padding,\r\n        dAvailableHeight =  dScreenHeight - padding - dy;\r\n\r\n    // *****************************************\r\n    // define width and height of the container\r\n    if (vScale === 0 || (bIsOnload && !vScale)) {\r\n        // set size of the container according to the size of the viewport\r\n        if (dLoadWidth > dAvailableWidth || dLoadHeight > dAvailableHeight) {\r\n            var newWidth = dAvailableWidth,\r\n                newHeight = dAvailableWidth * dLoadHeight / dLoadWidth;\r\n\r\n            if (newHeight > dAvailableHeight) {\r\n                newHeight = dAvailableHeight;\r\n                newWidth = dAvailableHeight * dLoadWidth / dLoadHeight;\r\n            }\r\n\r\n            w = picture.width = newWidth;\r\n            h = (picture.height = newHeight) + dy;\r\n        } else {\r\n            w = picture.width = dLoadWidth;\r\n            h = (picture.height = dLoadHeight) + dy;\r\n        }\r\n\r\n    } else if (vScale==1) {\r\n        // show image in real size\r\n        w = picture.width = dLoadWidth;\r\n        h = (picture.height = dLoadHeight) + dy;\r\n    } else if (vScale < 1 || vScale > 1) {\r\n        // zoom image according to vScale\r\n        w = (picture.width *= vScale);\r\n        h = (picture.height *= vScale) + dy;\r\n    } else {\r\n        w = h = 300;    // default size\r\n        disableAnimate = true;\r\n    }\r\n\r\n    // enable/disable the full size button\r\n    if (notFitScreen = ( w > dAvailableWidth || h > (dAvailableHeight + dy) )) {\r\n        fsTitle = langVars.fitScreen;\r\n        fsClass = 'LG_fitScreen';\r\n    } else if (picture.width != dLoadWidth || picture.height != dLoadHeight) {\r\n        fsTitle = langVars.fullSize;\r\n        fsClass = 'LG_zoomNormal';\r\n    }\r\n\r\n    fullSizeBtn.$disabled = false;\r\n    if (picture.getAttribute('width') == dLoadWidth) {\r\n        // it is real size of the image\r\n        if (notFitScreen) {\r\n            fullSizeBtn.id = fsClass;\r\n            fullSizeBtn.setAttribute('title', fsTitle);\r\n        } else {\r\n            fullSizeBtn.id = 'LG_zoom_disabled';\r\n            fullSizeBtn.$disabled = true;\r\n        }\r\n    } else {\r\n        fullSizeBtn.id = 'LG_zoomNormal';\r\n        fullSizeBtn.setAttribute('title', langVars.fullSize);\r\n    }\r\n\r\n    // here we set the minimal width of the container\r\n    w = Math.max(w, minContainerWidth);\r\n\r\n    // correct coords according to scroll bars position\r\n    var scr = getScrollXY(),\r\n        y = (dScreenHeight > h ? (dScreenHeight - h)/2 : options.minPadding) + scr[1],\r\n        x = (dScreenWidth > w ? (dScreenWidth - w)/2 : options.minPadding) + scr[0],\r\n\r\n        // set the width of the prev/next buttons as 1/3 of the picture width\r\n        dBtnWidth = (w/3),\r\n        dBtnHeight = (h - dy - 10);\r\n        animCallback = function(){\r\n            showOverlay();\r\n            showContent();\r\n        };\r\n\r\n    css(nextBtn, {width: dBtnWidth, height: dBtnHeight});\r\n    css(prevBtn, {width: dBtnWidth, height: dBtnHeight});\r\n\r\n    if (options.animate && !disableAnimate) {\r\n        if (options.resizeSync) {\r\n            animate(container, {\r\n                width: w,\r\n                left: x,\r\n                height: h,\r\n                top: y\r\n            }, options.duration, animCallback);\r\n        } else {\r\n            animate(container, {width: w, left: x}, options.duration/2, function(){\r\n                animate(container, {height: h, top: y}, options.duration/2, animCallback);\r\n            });\r\n        }\r\n    } else {\r\n        css(container, {top: y, left: x, width: w, height: h});\r\n        animCallback();\r\n    }\r\n}\r\n\r\n/**\r\n * Show container content\r\n */\r\nfunction showContent() {\r\n    innerCont.style.display = 'block';\r\n\r\n    css(picture, {opacity:0});\r\n    animate(picture, {opacity: 1}, options.fadeImage ? 400 : 0, function(){ bInProgress = 0; });\r\n}\r\n\r\n/**\r\n * Hide container content\r\n */\r\nfunction hideContent() {\r\n    innerCont.style.display = 'none';\r\n}\r\n\r\nfunction showLoadingIcon() {\r\n    oThrobber.style.display = 'block';\r\n}\r\n\r\nfunction hideLoadingIcon() {\r\n    oThrobber.style.display = 'none';\r\n}\r\n\r\n/**\r\n * Create container\r\n */\r\nfunction createContainer() {\r\n    if (!options.enableZoom) {\r\n        zoomIn = zoomOut = '';\r\n    }\r\n\r\n    var container = _(DIV, {id:'LG_container'},\r\n        oThrobber,\r\n        _(DIV, {id:'LG_innerCont'},\r\n            _(DIV, {id:'LG_panel'},\r\n                zoomIn, zoomOut, fullSizeBtn, imgIndex, _(DIV,{id:'LG_closeBtn',title:langVars.close}), _(DIV, {style: 'clear:both'})\r\n            ),\r\n            picture,\r\n            titleBar,\r\n            prevBtn, nextBtn\r\n        )\r\n    );\r\n\r\n\r\n    var navHandler = function(event){\r\n        event.cancelBubble = true;\r\n        event.stopPropagation && event.stopPropagation();\r\n        \r\n        var target = event.target || event.srcElement;\r\n        \r\n        if (event.type == 'click') {\r\n            var fnList = {\r\n                LG_closeBtn: G.close,\r\n                LG_zoomNormal: G.zoomNormal,\r\n                LG_fitScreen: G.zoomNormal,\r\n                LG_zoomIn: G.zoomIn,\r\n                LG_zoomOut: G.zoomOut,\r\n                LG_nextLink: G.next,\r\n                LG_prevLink: G.prev\r\n            };\r\n\r\n            if (target.id in fnList) {\r\n                fnList[target.id].call(G);\r\n            }\r\n            \r\n        } else if (target.id == 'LG_nextLink' || target.id == 'LG_prevLink') {\r\n            animate(\r\n                target,\r\n                {opacity: event.type == 'mouseout' ? 0 : 1}\r\n            );\r\n        }\r\n    };\r\n    \r\n    addEvent(container, 'click', navHandler);\r\n    addEvent(container, 'mouseover', navHandler);\r\n    addEvent(container, 'mouseout', navHandler);\r\n\r\n    return container;\r\n}\r\n\r\nfunction keyPressHandler(e) {\r\n    if (!isOpen) return;\r\n\r\n    e = e || window.event;\r\n    var code = e.keyCode ? e.keyCode : (e.which ? e.which : e.charCode),\r\n        fnList = {\r\n            78 : G.next,       // n key\r\n            39 : G.next,       // right arrow\r\n            66 : G.prev,       // b key\r\n            37 : G.prev,       // left arrow\r\n            27 : G.close       // Esc key\r\n        };\r\n\r\n    if (options.enableZoom) {\r\n        fnList[70] = G.zoomNormal;  // f key\r\n        fnList[107] = G.zoomIn;     // +\r\n        fnList[109] = G.zoomOut;    // -\r\n        fnList[189] = G.zoomOut;    // dash (minus in the top row)\r\n    }\r\n\r\n    if (e.shiftKey && code == 187) {\r\n        // Zoom in when Shift+\r\n        G.zoomIn();\r\n    } else if (fnList[code]) {\r\n        fnList[code]();\r\n    }\r\n}\r\n\r\n/**\r\n * Extends object with properties of another object\r\n * @param {object} target\r\n * @param {object} source\r\n */\r\nfunction extend(target, source) {\r\n    for (var i in source) {\r\n        target[i] = source[i];\r\n    }\r\n}\r\n\r\n/**\r\n* Set CSS style of the element\r\n* @param {object} elem\r\n* @param {object} styles\r\n*/\r\nfunction css(elem, styles){\r\n    for (var prop in styles) {\r\n        setElemStyle(elem, prop, styles[prop]);\r\n    }\r\n}\r\n\r\n/**\r\n * Get the page and viewport size\r\n * @return {Array}\r\n */\r\nfunction getPageSize(){\r\n    var xScroll,\r\n        yScroll,\r\n        windowWidth,\r\n        windowHeight,\r\n        de = document.documentElement,\r\n        body = document.body,\r\n        elem = document.compatMode === \"CSS1Compat\" ?  de : body;\r\n\r\n    if (window.innerHeight && window.scrollMaxY) {\r\n        xScroll = body.scrollWidth;\r\n        yScroll = window.innerHeight + window.scrollMaxY;\r\n    } else if (body.scrollHeight > body.offsetHeight){ // all but Explorer Mac\r\n        xScroll = body.scrollWidth;\r\n        yScroll = body.scrollHeight;\r\n    } else if (de && de.scrollHeight > de.offsetHeight){ // Explorer 6 strict mode\r\n        xScroll = de.scrollWidth;\r\n        yScroll = de.scrollHeight;\r\n    } else { // Explorer Mac...would also work in Mozilla and Safari\r\n        xScroll = body.offsetWidth;\r\n        yScroll = body.offsetHeight;\r\n    }\r\n\r\n\r\n    windowHeight = elem.clientHeight;\r\n    windowWidth = elem.clientWidth;\r\n\r\n    return [\r\n        // Viewport height. For small pages with total width less then width of the viewport\r\n        xScroll < windowWidth? windowWidth : xScroll,\r\n\r\n        // Viewport height. For small pages with total height less then height of the viewport\r\n        yScroll < windowHeight? windowHeight : yScroll,\r\n\r\n        windowWidth,\r\n        windowHeight\r\n    ];\r\n}\r\n\r\n/**\r\n * Get coords of scroll bars\r\n * @return {Array} - [coord horizontal, coord vertical]\r\n */\r\nfunction getScrollXY() {\r\n    var scrOfX = 0, scrOfY = 0, b = document.body, de = document.documentElement;\r\n    if( typeof( window.pageYOffset ) == 'number' ) {\r\n        //Netscape compliant\r\n        scrOfY = window.pageYOffset;\r\n        scrOfX = window.pageXOffset;\r\n    } else if( b && ( b.scrollLeft || b.scrollTop ) ) {\r\n        //DOM compliant\r\n        scrOfY = b.scrollTop;\r\n        scrOfX = b.scrollLeft;\r\n    } else if( de && ( de.scrollLeft || de.scrollTop ) ) {\r\n        //IE6 Strict\r\n        scrOfY = de.scrollTop;\r\n        scrOfX = de.scrollLeft;\r\n    }\r\n    return [ scrOfX, scrOfY ];\r\n}\r\n\r\n/**\r\n * Create HTML element\r\n * @param {String} tag - tag name\r\n * @param {Object} attr - attributes to set, ex: {'name':'someClass',value:'the value'}\r\n */\r\nfunction _(tag, attr) {\r\n\r\n    var elem = document.createElement(tag),\r\n        i = 2,\r\n        j,\r\n        name,\r\n        value,\r\n        len = arguments.length;\r\n\r\n    if (attr){\r\n        for (name in attr) {\r\n            value = attr[name];\r\n            if (typeof value == STRING) {\r\n                if (name == 'class') {\r\n                    elem.className = value;\r\n                } else {\r\n                    elem.setAttribute(name, value);\r\n                }\r\n\r\n            }\r\n        }\r\n    }\r\n\r\n    for (; i < len; i++) {\r\n        if (typeof arguments[i] == STRING) {\r\n            elem.innerHTML += arguments[i];\r\n        } else {\r\n            elem.appendChild(arguments[i]);\r\n        }\r\n    }\r\n\r\n    return elem;\r\n}\r\n\r\nfunction loadImage(src) {\r\n    loaderImage = new Image();\r\n\r\n    // create new Image element to load images\r\n    loaderImage.onload = function() {\r\n        hideLoadingIcon();\r\n\r\n        picture.src = loaderImage.src;\r\n        setContPos(options.fullSize ? 1 : 0, true);\r\n        preload();\r\n    };\r\n\r\n    if (src) {\r\n        loaderImage.src = src;\r\n    }\r\n\r\n    return loaderImage;\r\n}\r\n\r\n/**\r\n * ondomready functionality from jQuery framework:\r\n */\r\nfunction ready() {\r\n    if (!isReady) {\r\n        if (!document.body) {\r\n            return setTimeout(ready, 13);\r\n        }\r\n\r\n        isReady = true;\r\n\r\n        G.init();\r\n    }\r\n}\r\n\r\nfunction bindReady() {\r\n\r\n    if (readyBound) return;\r\n    readyBound = true;\r\n\r\n    if (document.readyState === \"complete\" ) {\r\n        return ready();\r\n    }\r\n\r\n    if (document.addEventListener) {\r\n        document.addEventListener( \"DOMContentLoaded\", function DOMContentLoaded() {\r\n            document.removeEventListener( \"DOMContentLoaded\", DOMContentLoaded, false );\r\n            ready();\r\n        }, false);\r\n\r\n    // If IE event model is used\r\n    } else if (document.attachEvent) {\r\n        document.attachEvent(\"onreadystatechange\", function onreadystatechange() {\r\n            if ( document.readyState === \"complete\" ) {\r\n                document.detachEvent(\"onreadystatechange\", onreadystatechange);\r\n                ready();\r\n            }\r\n        });\r\n\r\n        // If IE and not a frame\r\n        // continually check to see if the document is ready\r\n        var toplevel = false;\r\n\r\n        try {\r\n            toplevel = window.frameElement === null;\r\n        } catch(e){}\r\n\r\n        if (document.documentElement.doScroll && toplevel) {\r\n\r\n            function doScrollCheck() {\r\n                if (isReady) {\r\n                    return;\r\n                }\r\n\r\n                try {\r\n                    // If IE is used, use the trick by Diego Perini\r\n                    // http://javascript.nwbox.com/IEContentLoaded/\r\n                    document.documentElement.doScroll(\"left\");\r\n                } catch(e) {\r\n                    setTimeout( doScrollCheck, 1 );\r\n                    return;\r\n                }\r\n\r\n                // and execute any waiting functions\r\n                ready();\r\n            }\r\n\r\n            doScrollCheck();\r\n        }\r\n    }\r\n}\r\n\r\n\r\nvar isFilterOpacity = typeof _('a').style.filter == STRING,\r\n  requestAnimFrame = (function(){\r\n    return  window.requestAnimationFrame       || \r\n            window.webkitRequestAnimationFrame || \r\n            window.mozRequestAnimationFrame    || \r\n            window.msRequestAnimationFrame     || \r\n            window.oRequestAnimationFrame      || \r\n            function(callback) {\r\n              window.setTimeout(function () {\r\n                callback(+new Date())\r\n              }, 17)\r\n            }\r\n  })();\r\n  setElemStyle = (function(){\r\n\r\n      var pxs = {\r\n          width  : 1,\r\n          height : 1,\r\n          top    : 1,\r\n          left   : 1\r\n      };\r\n\r\n      if (isFilterOpacity) {\r\n          return function(elem, prop, option) {\r\n              if (prop == 'opacity'){\r\n                  elem.style.filter = 'alpha(opacity='+option*100+')';\r\n              }\r\n              elem.style[prop] = option + (pxs[prop] ? 'px':'');\r\n          };\r\n      }\r\n\r\n      return function(elem, prop, option) {\r\n          elem.style[prop] = option + (pxs[prop] ? 'px':'');\r\n      };\r\n  })();\r\n\r\nvar animate = function(el, target, duration, after) {\r\n    if (options.animate) {\r\n        duration = typeof duration == 'number' ? duration : 200;\r\n    } else {\r\n        duration = 0;\r\n    }\r\n\r\n    var comp = el.currentStyle ? el.currentStyle : getComputedStyle(el, null),\r\n        prop,\r\n        current = {},\r\n        perf = window.performance,\r\n        perfNow = perf && (perf.now || perf.webkitNow || perf.msNow || perf.mozNow),\r\n        now = perfNow ? function () { return perfNow.call(perf) } : function () { return +new Date() },\r\n        start = now(),\r\n        finish = start + duration,\r\n        running = true,\r\n        cmpValue = 0,\r\n        match,\r\n        easing = function(pos){ return (-Math.cos(pos*Math.PI)/2) + 0.5; },\r\n        loop = function(time){\r\n            if (!running) return;\r\n            if (perfNow && time > 1e12) time = now();\r\n\r\n            var prop, pos;\r\n\r\n            pos = time > finish ? 1 : (time-start) / duration;\r\n\r\n            for (prop in target) {\r\n                setElemStyle(el, prop, (current[prop] + (target[prop] - current[prop]) * easing(pos)).toFixed(3));\r\n            }\r\n\r\n            if (time > finish) {\r\n                running = false;\r\n                after && after();\r\n            }\r\n            requestAnimFrame(loop);\r\n        };\r\n\r\n    for (prop in target) {\r\n        if (prop == 'opacity' && isFilterOpacity) {\r\n            match = comp.filter.match(/opacity\\=(\\d+)/);\r\n            if (match) {\r\n                cmpValue = parseFloat(match[1])/100;\r\n            }\r\n\r\n        } else {\r\n            cmpValue = parseFloat(comp[prop]);\r\n        }\r\n\r\n        current[prop] = cmpValue;\r\n    }\r\n\r\n    requestAnimFrame(loop);\r\n};\r\n\r\nreturn G;\r\n})(window, document);\r\n"]}